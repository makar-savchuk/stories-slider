{"version":3,"file":"stories-slider.js.map","sources":["../src/stories-slider.esm.js"],"sourcesContent":["/* eslint-disable no-shadow */\nexport default function createStoriesSlider(el, params = {}) {\n  const mainSwiperEl = el.querySelector('.swiper');\n  const {\n    autoplayDuration = 5000,\n    Swiper,\n    EffectCube,\n    onSlidesIndexesChange,\n    onAutoplayStart,\n    onAutoplayStop,\n  } = params;\n  let { enabled = true } = params;\n\n  let activeSubSwiperIndex = 0;\n\n  let mainSwiper;\n  let videoRaf;\n  const subSwipers = [];\n\n  let slideIndexesChangeRaf;\n\n  let isTouched;\n  let touchStartTime;\n  let touchStartTimeout;\n  let touchHoldDuration;\n  let autoplayStartTime;\n  let autoplayTimeLeft;\n  let autoplayTouchPaused;\n\n  const startAutoplay = (swiper, durationForce) => {\n    const subSwiperIndex = subSwipers.indexOf(swiper);\n    let duration =\n      typeof durationForce === 'undefined' ? autoplayDuration : durationForce;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (Number.isNaN(currentSlideDuration) && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    if (\n      !Number.isNaN(currentSlideDuration) &&\n      currentSlideDuration > 0 &&\n      typeof durationForce === 'undefined'\n    ) {\n      duration = currentSlideDuration;\n    }\n    autoplayTimeLeft = duration;\n\n    swiper.storiesSliderAutoplayTimeout = setTimeout(() => {\n      if (!swiper.isEnd) {\n        swiper.slideNext();\n      } else {\n        if (activeSubSwiperIndex !== subSwiperIndex) return;\n        if (!mainSwiper.isEnd) mainSwiper.slideNext();\n      }\n    }, duration);\n\n    if (onAutoplayStart) onAutoplayStart(swiper);\n    return duration;\n  };\n  const stopAutoplay = (swiper) => {\n    clearTimeout(swiper.storiesSliderAutoplayTimeout);\n    if (onAutoplayStop) onAutoplayStop(swiper);\n  };\n  const pauseAutoplay = (swiper) => {\n    stopAutoplay(swiper);\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      cancelAnimationFrame(videoRaf);\n      videoEl.pause();\n    }\n    const duration = autoplayTimeLeft || autoplayDuration;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    if (Number.isNaN(currentSlideDuration)) currentSlideDuration = undefined;\n    if (!currentSlideDuration && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    autoplayTimeLeft = duration - (new Date().getTime() - autoplayStartTime);\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    if (autoplayTimeLeft < 0) autoplayTimeLeft = 0;\n\n    const calcTranslate =\n      1 - autoplayTimeLeft / (currentSlideDuration || autoplayDuration);\n    const currentBullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n\n    currentBullet.querySelector('span').remove();\n    currentBullet.insertAdjacentHTML(\n      'beforeend',\n      `<span style=\"transform:translateX(${\n        -100 + calcTranslate * 100\n      }%)\"></span>`,\n    );\n  };\n  const resumeAutoPlay = (swiper) => {\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    autoplayStartTime = new Date().getTime();\n\n    startAutoplay(swiper, autoplayTimeLeft);\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    const bullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${\n        swiper.activeIndex + 1\n      }) > span`,\n    );\n\n    bullet.style.transform = 'translateX(0%)';\n    bullet.style.transitionDuration = `${autoplayTimeLeft}ms`;\n  };\n\n  const onSubSwiperSlideChange = (swiper) => {\n    stopAutoplay(swiper);\n    startAutoplay(swiper);\n    autoplayStartTime = new Date().getTime();\n\n    const removeBullet = swiper.el.querySelector(\n      '.stories-slider-pagination-bullet-current',\n    );\n    if (removeBullet) {\n      removeBullet.classList.remove('stories-slider-pagination-bullet-current');\n    }\n\n    const currentBullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      videoEl.currentTime = 0;\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    // find other videos\n    swiper.slides.forEach((slideEl) => {\n      slideEl.querySelectorAll('video').forEach((vEl) => {\n        if (vEl === videoEl) return;\n        vEl.currentTime = 0;\n        if (!videoEl) cancelAnimationFrame(videoRaf);\n        vEl.pause();\n      });\n    });\n\n    subSwipers\n      .filter((s, index) => index !== activeSubSwiperIndex)\n      .forEach((s) => {\n        s.el.querySelectorAll('video').forEach((vEl) => {\n          if (!videoEl) cancelAnimationFrame(videoRaf);\n          vEl.pause();\n        });\n      });\n    const allBullets = [...currentBullet.parentElement.children];\n    const prevBullets = [...allBullets].filter(\n      (el, index) => index < allBullets.indexOf(currentBullet),\n    );\n    const nextBullets = [...allBullets].filter(\n      (el, index) => index > allBullets.indexOf(currentBullet),\n    );\n    // prev bullets\n    prevBullets.forEach((el) => {\n      el.classList.add('stories-slider-pagination-bullet-viewed');\n      el.querySelectorAll('span').forEach((e) => e.remove());\n      el.insertAdjacentHTML('beforeend', '<span></span>');\n    });\n\n    // next bullets\n    nextBullets.forEach((el) => {\n      el.classList.remove(\n        'stories-slider-pagination-bullet-viewed',\n        'stories-slider-pagination-bullet-current',\n      );\n      el.querySelectorAll('span').forEach((e) => e.remove());\n      el.insertAdjacentHTML('beforeend', '<span></span>');\n    });\n\n    // current bullet\n    currentBullet.classList.remove('stories-slider-pagination-bullet-viewed');\n    currentBullet.classList.add('stories-slider-pagination-bullet-current');\n    [...currentBullet.children].forEach((el) => el.remove());\n    currentBullet.insertAdjacentHTML('beforeend', '<span></span>');\n\n    // eslint-disable-next-line\n    const __clientWidth = currentBullet.clientWidth;\n    currentBullet.querySelector('span').style.transform = 'translateX(0%)';\n    currentBullet.querySelector(\n      'span',\n    ).style.transitionDuration = `${autoplayTimeLeft}ms`;\n\n    if (onSlidesIndexesChange) {\n      cancelAnimationFrame(slideIndexesChangeRaf);\n      slideIndexesChangeRaf = requestAnimationFrame(() => {\n        onSlidesIndexesChange(activeSubSwiperIndex, swiper.activeIndex);\n      });\n    }\n  };\n\n  const initMainSwiper = () => {\n    const setPerspectiveFix = () => {\n      el.classList.add('stories-slider-perspective');\n    };\n    const removePerspectiveFix = () => {\n      el.classList.remove('stories-slider-perspective');\n    };\n    mainSwiper = new Swiper(mainSwiperEl, {\n      modules: typeof EffectCube !== 'undefined' ? [EffectCube] : [],\n      effect: 'cube',\n      speed: 500,\n      threshold: 5,\n      cubeEffect: {\n        shadow: false,\n      },\n      observer: true,\n      on: {\n        transitionStart() {\n          removePerspectiveFix();\n        },\n        sliderFirstMove() {\n          removePerspectiveFix();\n        },\n        transitionEnd() {\n          setPerspectiveFix();\n        },\n        init(mainSwiper) {\n          mainSwiper.params.resistanceRatio = 0.5;\n          setPerspectiveFix();\n        },\n        slideChange() {\n          const prevSubSwiper = subSwipers[activeSubSwiperIndex];\n          activeSubSwiperIndex = mainSwiper.activeIndex;\n          const currentSubSwiper = subSwipers[activeSubSwiperIndex];\n          stopAutoplay(prevSubSwiper);\n          startAutoplay(currentSubSwiper);\n          onSubSwiperSlideChange(currentSubSwiper, false);\n        },\n      },\n    });\n  };\n\n  const initSubSwiperPagination = (subSwiperEl) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n    const paginationContainerEl = document.createElement('div');\n    paginationContainerEl.classList.add('stories-slider-pagination');\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const paginationBulletEl = document.createElement('div');\n      paginationBulletEl.classList.add('stories-slider-pagination-bullet');\n      paginationBulletEl.appendChild(document.createElement('span'));\n      paginationContainerEl.appendChild(paginationBulletEl);\n    }\n\n    subSwiperEl.appendChild(paginationContainerEl);\n  };\n  const destroySubSwiperPagination = (swiper) => {\n    swiper.el\n      .querySelectorAll(\n        '.stories-slider-pagination, .stories-slider-pagination-bullet',\n      )\n      .forEach((el) => el.remove());\n  };\n  const initSubSwiperNavigation = (subSwiperEl, swiper) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n\n    slides.forEach((slideEl) => {\n      const navLeftEl = document.createElement('div');\n      const navRightEl = document.createElement('div');\n\n      navLeftEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-prev',\n      );\n      navRightEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-next',\n      );\n\n      slideEl.appendChild(navLeftEl);\n      slideEl.appendChild(navRightEl);\n\n      const onNavLeftClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isBeginning) {\n          mainSwiper.slidePrev();\n          return;\n        }\n        swiper.slidePrev();\n      };\n      const onNavRightClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isEnd) {\n          mainSwiper.slideNext();\n          return;\n        }\n        swiper.slideNext();\n      };\n\n      navLeftEl.addEventListener('click', onNavLeftClick);\n      navRightEl.addEventListener('click', onNavRightClick);\n    });\n  };\n\n  const destroySubSwiperNavigation = (swiper) => {\n    swiper.el\n      .querySelectorAll('.stories-slider-button')\n      .forEach((el) => el.remove());\n  };\n  const initSubSwipers = () => {\n    el.querySelectorAll('.swiper .swiper').forEach(\n      (subSwiperEl, subSwiperIndex) => {\n        const swiper = new Swiper(subSwiperEl, {\n          speed: 1,\n          nested: true,\n          allowTouchMove: false,\n          observer: true,\n          on: {\n            touchStart(swiper) {\n              isTouched = true;\n              autoplayTouchPaused = false;\n              touchStartTime = new Date().getTime();\n              touchStartTimeout = setTimeout(() => {\n                autoplayTouchPaused = true;\n                pauseAutoplay(swiper);\n              }, 200);\n            },\n            touchEnd(swiper) {\n              clearTimeout(touchStartTimeout);\n              if (activeSubSwiperIndex !== subSwiperIndex) return;\n              if (!isTouched) {\n                return;\n              }\n              touchHoldDuration = new Date().getTime() - touchStartTime;\n              if (autoplayTouchPaused) resumeAutoPlay(swiper);\n              autoplayTouchPaused = false;\n              isTouched = false;\n            },\n            init(swiper) {\n              if (!enabled) return;\n              if (activeSubSwiperIndex !== subSwiperIndex) {\n                stopAutoplay(swiper);\n              } else {\n                requestAnimationFrame(() => {\n                  onSubSwiperSlideChange(swiper);\n                });\n              }\n            },\n            slideChange(swiper) {\n              onSubSwiperSlideChange(swiper);\n            },\n          },\n        });\n\n        initSubSwiperPagination(subSwiperEl);\n\n        initSubSwiperNavigation(subSwiperEl, swiper);\n\n        subSwipers.push(swiper);\n      },\n    );\n  };\n\n  initMainSwiper();\n  initSubSwipers();\n\n  const enable = () => {\n    if (enabled) return;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        onSubSwiperSlideChange(subSwiper);\n      }\n    });\n  };\n\n  const disable = () => {\n    enabled = false;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      subSwiper.el.querySelectorAll('video').forEach((videoEl) => {\n        cancelAnimationFrame(videoRaf);\n        videoEl.pause();\n      });\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        pauseAutoplay(subSwiper);\n      } else {\n        stopAutoplay(subSwiper);\n      }\n    });\n  };\n\n  const destroy = () => {\n    if (mainSwiper && mainSwiper.destroy) mainSwiper.destroy();\n    subSwipers.forEach((subSwiper) => {\n      stopAutoplay(subSwiper);\n      destroySubSwiperPagination(subSwiper);\n      destroySubSwiperNavigation(subSwiper);\n      if (subSwiper.destroy) subSwiper.destroy();\n    });\n  };\n\n  const slideTo = (mainIndex, subIndex) => {\n    if (mainSwiper && mainSwiper.slideTo && !mainSwiper.destroyed) {\n      mainSwiper.slideTo(mainIndex, 0);\n    }\n    if (typeof subIndex !== 'undefined') {\n      const subSwiper = subSwipers[mainIndex];\n      if (subSwiper.slideTo && !subSwiper.destroyed) {\n        if (subSwiper.activeIndex === subIndex) {\n          onSubSwiperSlideChange(subSwiper);\n        } else {\n          subSwiper.slideTo(subIndex, 0);\n        }\n      }\n    }\n  };\n\n  return { el, mainSwiper, subSwipers, destroy, slideTo, enable, disable };\n}\n"],"names":[],"mappings":"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"}