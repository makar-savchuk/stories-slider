{"version":3,"file":"stories-slider.min.js","names":["el","params","mainSwiperEl","querySelector","autoplayDuration","Swiper","EffectCube","onSlidesIndexesChange","onAutoplayStart","onAutoplayStop","mainSwiper","videoRaf","enabled","activeSubSwiperIndex","subSwipers","slideIndexesChangeRaf","isTouched","touchStartTime","touchStartTimeout","touchHoldDuration","autoplayStartTime","autoplayTimeLeft","autoplayTouchPaused","startAutoplay","swiper","durationForce","subSwiperIndex","indexOf","duration","currentSlideDuration","parseInt","slides","activeIndex","getAttribute","videoEl","Number","isNaN","storiesSliderAutoplayTimeout","setTimeout","isEnd","slideNext","stopAutoplay","clearTimeout","pauseAutoplay","cancelAnimationFrame","pause","undefined","Date","getTime","calcTranslate","currentBullet","remove","insertAdjacentHTML","onSubSwiperSlideChange","removeBullet","classList","currentTime","requestAnimationFrame","play","err","forEach","slideEl","querySelectorAll","vEl","filter","s","index","allBullets","parentElement","children","prevBullets","nextBullets","add","e","clientWidth","style","transform","transitionDuration","setPerspectiveFix","removePerspectiveFix","modules","effect","speed","threshold","cubeEffect","shadow","observer","on","transitionStart","sliderFirstMove","transitionEnd","init","resistanceRatio","slideChange","prevSubSwiper","currentSubSwiper","initMainSwiper","subSwiperEl","nested","allowTouchMove","touchStart","touchEnd","bullet","resumeAutoPlay","paginationContainerEl","document","createElement","i","length","paginationBulletEl","appendChild","initSubSwiperPagination","navLeftEl","navRightEl","addEventListener","isBeginning","slidePrev","initSubSwiperNavigation","push","destroy","subSwiper","destroySubSwiperNavigation","slideTo","mainIndex","subIndex","destroyed","enable","disable"],"sources":["../src/stories-slider.esm.js"],"sourcesContent":["/* eslint-disable no-shadow */\nexport default function createStoriesSlider(el, params = {}) {\n  const mainSwiperEl = el.querySelector('.swiper');\n  const {\n    autoplayDuration = 5000,\n    Swiper,\n    EffectCube,\n    onSlidesIndexesChange,\n    onAutoplayStart,\n    onAutoplayStop,\n  } = params;\n  let { enabled = true } = params;\n\n  let activeSubSwiperIndex = 0;\n\n  let mainSwiper;\n  let videoRaf;\n  const subSwipers = [];\n\n  let slideIndexesChangeRaf;\n\n  let isTouched;\n  let touchStartTime;\n  let touchStartTimeout;\n  let touchHoldDuration;\n  let autoplayStartTime;\n  let autoplayTimeLeft;\n  let autoplayTouchPaused;\n\n  const startAutoplay = (swiper, durationForce) => {\n    const subSwiperIndex = subSwipers.indexOf(swiper);\n    let duration =\n      typeof durationForce === 'undefined' ? autoplayDuration : durationForce;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (Number.isNaN(currentSlideDuration) && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    if (\n      !Number.isNaN(currentSlideDuration) &&\n      currentSlideDuration > 0 &&\n      typeof durationForce === 'undefined'\n    ) {\n      duration = currentSlideDuration;\n    }\n    autoplayTimeLeft = duration;\n\n    swiper.storiesSliderAutoplayTimeout = setTimeout(() => {\n      if (!swiper.isEnd) {\n        swiper.slideNext();\n      } else {\n        if (activeSubSwiperIndex !== subSwiperIndex) return;\n        if (!mainSwiper.isEnd) mainSwiper.slideNext();\n      }\n    }, duration);\n\n    if (onAutoplayStart) onAutoplayStart(swiper);\n    return duration;\n  };\n  const stopAutoplay = (swiper) => {\n    clearTimeout(swiper.storiesSliderAutoplayTimeout);\n    if (onAutoplayStop) onAutoplayStop(swiper);\n  };\n  const pauseAutoplay = (swiper) => {\n    stopAutoplay(swiper);\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      cancelAnimationFrame(videoRaf);\n      videoEl.pause();\n    }\n    const duration = autoplayTimeLeft || autoplayDuration;\n    let currentSlideDuration = parseInt(\n      swiper.slides[swiper.activeIndex].getAttribute('data-duration'),\n      10,\n    );\n    if (Number.isNaN(currentSlideDuration)) currentSlideDuration = undefined;\n    if (!currentSlideDuration && videoEl) {\n      currentSlideDuration = videoEl.duration * 1000;\n    }\n    autoplayTimeLeft = duration - (new Date().getTime() - autoplayStartTime);\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    if (autoplayTimeLeft < 0) autoplayTimeLeft = 0;\n\n    const calcTranslate =\n      1 - autoplayTimeLeft / (currentSlideDuration || autoplayDuration);\n    const currentBullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n\n    currentBullet.querySelector('span').remove();\n    currentBullet.insertAdjacentHTML(\n      'beforeend',\n      `<span style=\"transform:translateX(${\n        -100 + calcTranslate * 100\n      }%)\"></span>`,\n    );\n  };\n  const resumeAutoPlay = (swiper) => {\n    if (swiper.isEnd && autoplayTimeLeft < 0) return;\n    autoplayStartTime = new Date().getTime();\n\n    startAutoplay(swiper, autoplayTimeLeft);\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    const bullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${\n        swiper.activeIndex + 1\n      }) > span`,\n    );\n\n    bullet.style.transform = 'translateX(0%)';\n    bullet.style.transitionDuration = `${autoplayTimeLeft}ms`;\n  };\n\n  const onSubSwiperSlideChange = (swiper) => {\n    stopAutoplay(swiper);\n    startAutoplay(swiper);\n    autoplayStartTime = new Date().getTime();\n\n    const removeBullet = swiper.el.querySelector(\n      '.stories-slider-pagination-bullet-current',\n    );\n    if (removeBullet) {\n      removeBullet.classList.remove('stories-slider-pagination-bullet-current');\n    }\n\n    const currentBullet = swiper.el.querySelector(\n      `.stories-slider-pagination-bullet:nth-child(${swiper.activeIndex + 1})`,\n    );\n    // find current video\n    const videoEl = swiper.slides[swiper.activeIndex].querySelector('video');\n    if (videoEl) {\n      videoEl.currentTime = 0;\n      try {\n        videoRaf = requestAnimationFrame(() => {\n          videoEl.play();\n        });\n      } catch (err) {\n        // error\n      }\n    }\n    // find other videos\n    swiper.slides.forEach((slideEl) => {\n      slideEl.querySelectorAll('video').forEach((vEl) => {\n        if (vEl === videoEl) return;\n        vEl.currentTime = 0;\n        if (!videoEl) cancelAnimationFrame(videoRaf);\n        vEl.pause();\n      });\n    });\n\n    subSwipers\n      .filter((s, index) => index !== activeSubSwiperIndex)\n      .forEach((s) => {\n        s.el.querySelectorAll('video').forEach((vEl) => {\n          if (!videoEl) cancelAnimationFrame(videoRaf);\n          vEl.pause();\n        });\n      });\n    const allBullets = [...currentBullet.parentElement.children];\n    const prevBullets = [...allBullets].filter(\n      (el, index) => index < allBullets.indexOf(currentBullet),\n    );\n    const nextBullets = [...allBullets].filter(\n      (el, index) => index > allBullets.indexOf(currentBullet),\n    );\n    // prev bullets\n    prevBullets.forEach((el) => {\n      el.classList.add('stories-slider-pagination-bullet-viewed');\n      el.querySelectorAll('span').forEach((e) => e.remove());\n      el.insertAdjacentHTML('beforeend', '<span></span>');\n    });\n\n    // next bullets\n    nextBullets.forEach((el) => {\n      el.classList.remove(\n        'stories-slider-pagination-bullet-viewed',\n        'stories-slider-pagination-bullet-current',\n      );\n      el.querySelectorAll('span').forEach((e) => e.remove());\n      el.insertAdjacentHTML('beforeend', '<span></span>');\n    });\n\n    // current bullet\n    currentBullet.classList.remove('stories-slider-pagination-bullet-viewed');\n    currentBullet.classList.add('stories-slider-pagination-bullet-current');\n    [...currentBullet.children].forEach((el) => el.remove());\n    currentBullet.insertAdjacentHTML('beforeend', '<span></span>');\n\n    // eslint-disable-next-line\n    const __clientWidth = currentBullet.clientWidth;\n    currentBullet.querySelector('span').style.transform = 'translateX(0%)';\n    currentBullet.querySelector(\n      'span',\n    ).style.transitionDuration = `${autoplayTimeLeft}ms`;\n\n    if (onSlidesIndexesChange) {\n      cancelAnimationFrame(slideIndexesChangeRaf);\n      slideIndexesChangeRaf = requestAnimationFrame(() => {\n        onSlidesIndexesChange(activeSubSwiperIndex, swiper.activeIndex);\n      });\n    }\n  };\n\n  const initMainSwiper = () => {\n    const setPerspectiveFix = () => {\n      el.classList.add('stories-slider-perspective');\n    };\n    const removePerspectiveFix = () => {\n      el.classList.remove('stories-slider-perspective');\n    };\n    mainSwiper = new Swiper(mainSwiperEl, {\n      modules: typeof EffectCube !== 'undefined' ? [EffectCube] : [],\n      effect: 'cube',\n      speed: 500,\n      threshold: 5,\n      cubeEffect: {\n        shadow: false,\n      },\n      observer: true,\n      on: {\n        transitionStart() {\n          removePerspectiveFix();\n        },\n        sliderFirstMove() {\n          removePerspectiveFix();\n        },\n        transitionEnd() {\n          setPerspectiveFix();\n        },\n        init(mainSwiper) {\n          mainSwiper.params.resistanceRatio = 0.5;\n          setPerspectiveFix();\n        },\n        slideChange() {\n          const prevSubSwiper = subSwipers[activeSubSwiperIndex];\n          activeSubSwiperIndex = mainSwiper.activeIndex;\n          const currentSubSwiper = subSwipers[activeSubSwiperIndex];\n          stopAutoplay(prevSubSwiper);\n          startAutoplay(currentSubSwiper);\n          onSubSwiperSlideChange(currentSubSwiper, false);\n        },\n      },\n    });\n  };\n\n  const initSubSwiperPagination = (subSwiperEl) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n    const paginationContainerEl = document.createElement('div');\n    paginationContainerEl.classList.add('stories-slider-pagination');\n\n    for (let i = 0; i < slides.length; i += 1) {\n      const paginationBulletEl = document.createElement('div');\n      paginationBulletEl.classList.add('stories-slider-pagination-bullet');\n      paginationBulletEl.appendChild(document.createElement('span'));\n      paginationContainerEl.appendChild(paginationBulletEl);\n    }\n\n    subSwiperEl.appendChild(paginationContainerEl);\n  };\n  const destroySubSwiperPagination = (swiper) => {\n    swiper.el\n      .querySelectorAll(\n        '.stories-slider-pagination, .stories-slider-pagination-bullet',\n      )\n      .forEach((el) => el.remove());\n  };\n  const initSubSwiperNavigation = (subSwiperEl, swiper) => {\n    const slides = subSwiperEl.querySelectorAll('.swiper-slide');\n\n    slides.forEach((slideEl) => {\n      const navLeftEl = document.createElement('div');\n      const navRightEl = document.createElement('div');\n\n      navLeftEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-prev',\n      );\n      navRightEl.classList.add(\n        'stories-slider-button',\n        'stories-slider-button-next',\n      );\n\n      slideEl.appendChild(navLeftEl);\n      slideEl.appendChild(navRightEl);\n\n      const onNavLeftClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isBeginning) {\n          mainSwiper.slidePrev();\n          return;\n        }\n        swiper.slidePrev();\n      };\n      const onNavRightClick = () => {\n        if (touchHoldDuration > 200) return;\n        if (swiper.isEnd) {\n          mainSwiper.slideNext();\n          return;\n        }\n        swiper.slideNext();\n      };\n\n      navLeftEl.addEventListener('click', onNavLeftClick);\n      navRightEl.addEventListener('click', onNavRightClick);\n    });\n  };\n\n  const destroySubSwiperNavigation = (swiper) => {\n    swiper.el\n      .querySelectorAll('.stories-slider-button')\n      .forEach((el) => el.remove());\n  };\n  const initSubSwipers = () => {\n    el.querySelectorAll('.swiper .swiper').forEach(\n      (subSwiperEl, subSwiperIndex) => {\n        const swiper = new Swiper(subSwiperEl, {\n          speed: 1,\n          nested: true,\n          allowTouchMove: false,\n          observer: true,\n          on: {\n            touchStart(swiper) {\n              isTouched = true;\n              autoplayTouchPaused = false;\n              touchStartTime = new Date().getTime();\n              touchStartTimeout = setTimeout(() => {\n                autoplayTouchPaused = true;\n                pauseAutoplay(swiper);\n              }, 200);\n            },\n            touchEnd(swiper) {\n              clearTimeout(touchStartTimeout);\n              if (activeSubSwiperIndex !== subSwiperIndex) return;\n              if (!isTouched) {\n                return;\n              }\n              touchHoldDuration = new Date().getTime() - touchStartTime;\n              if (autoplayTouchPaused) resumeAutoPlay(swiper);\n              autoplayTouchPaused = false;\n              isTouched = false;\n            },\n            init(swiper) {\n              if (!enabled) return;\n              if (activeSubSwiperIndex !== subSwiperIndex) {\n                stopAutoplay(swiper);\n              } else {\n                requestAnimationFrame(() => {\n                  onSubSwiperSlideChange(swiper);\n                });\n              }\n            },\n            slideChange(swiper) {\n              onSubSwiperSlideChange(swiper);\n            },\n          },\n        });\n\n        initSubSwiperPagination(subSwiperEl);\n\n        initSubSwiperNavigation(subSwiperEl, swiper);\n\n        subSwipers.push(swiper);\n      },\n    );\n  };\n\n  initMainSwiper();\n  initSubSwipers();\n\n  const enable = () => {\n    if (enabled) return;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        onSubSwiperSlideChange(subSwiper);\n      }\n    });\n  };\n\n  const disable = () => {\n    enabled = false;\n    subSwipers.forEach((subSwiper, subSwiperIndex) => {\n      subSwiper.el.querySelectorAll('video').forEach((videoEl) => {\n        cancelAnimationFrame(videoRaf);\n        videoEl.pause();\n      });\n      if (subSwiperIndex === activeSubSwiperIndex) {\n        pauseAutoplay(subSwiper);\n      } else {\n        stopAutoplay(subSwiper);\n      }\n    });\n  };\n\n  const destroy = () => {\n    if (mainSwiper && mainSwiper.destroy) mainSwiper.destroy();\n    subSwipers.forEach((subSwiper) => {\n      stopAutoplay(subSwiper);\n      destroySubSwiperPagination(subSwiper);\n      destroySubSwiperNavigation(subSwiper);\n      if (subSwiper.destroy) subSwiper.destroy();\n    });\n  };\n\n  const slideTo = (mainIndex, subIndex) => {\n    if (mainSwiper && mainSwiper.slideTo && !mainSwiper.destroyed) {\n      mainSwiper.slideTo(mainIndex, 0);\n    }\n    if (typeof subIndex !== 'undefined') {\n      const subSwiper = subSwipers[mainIndex];\n      if (subSwiper.slideTo && !subSwiper.destroyed) {\n        if (subSwiper.activeIndex === subIndex) {\n          onSubSwiperSlideChange(subSwiper);\n        } else {\n          subSwiper.slideTo(subIndex, 0);\n        }\n      }\n    }\n  };\n\n  return { el, mainSwiper, subSwipers, destroy, slideTo, enable, disable };\n}\n"],"mappings":";;;;;;;;;;;;;;2PACe,SAA6BA,EAAIC,EAAS,IACvD,MAAMC,EAAeF,EAAGG,cAAc,YAChCC,iBACJA,EAAmB,IAAIC,OACvBA,EAAMC,WACNA,EAAUC,sBACVA,EAAqBC,gBACrBA,EAAeC,eACfA,GACER,EACJ,IAIIS,EACAC,GALAC,QAAEA,GAAU,GAASX,EAErBY,EAAuB,EAI3B,MAAMC,EAAa,GAEnB,IAAIC,EAEAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAEJ,MAAMC,EAAgB,CAACC,EAAQC,KAC7B,MAAMC,EAAiBZ,EAAWa,QAAQH,GAC1C,IAAII,OACuB,IAAlBH,EAAgCrB,EAAmBqB,EACxDI,EAAuBC,SACzBN,EAAOO,OAAOP,EAAOQ,aAAaC,aAAa,iBAC/C,IAEF,MAAMC,EAAUV,EAAOO,OAAOP,EAAOQ,aAAa7B,cAAc,SAuBhE,OAtBIgC,OAAOC,MAAMP,IAAyBK,IACxCL,EAA0C,IAAnBK,EAAQN,WAG9BO,OAAOC,MAAMP,IACdA,EAAuB,QACE,IAAlBJ,IAEPG,EAAWC,GAEbR,EAAmBO,EAEnBJ,EAAOa,6BAA+BC,YAAW,KAC/C,GAAKd,EAAOe,MAEL,CACL,GAAI1B,IAAyBa,EAAgB,OACxChB,EAAW6B,OAAO7B,EAAW8B,WAC1C,MAJQhB,EAAOgB,WAIf,GACOZ,GAECpB,GAAiBA,EAAgBgB,GAC9BI,CAAQ,EAEXa,EAAgBjB,IACpBkB,aAAalB,EAAOa,8BAChB5B,GAAgBA,EAAee,EAAO,EAEtCmB,EAAiBnB,IACrBiB,EAAajB,GAEb,MAAMU,EAAUV,EAAOO,OAAOP,EAAOQ,aAAa7B,cAAc,SAC5D+B,IACFU,qBAAqBjC,GACrBuB,EAAQW,SAEV,MAAMjB,EAAWP,GAAoBjB,EACrC,IAAIyB,EAAuBC,SACzBN,EAAOO,OAAOP,EAAOQ,aAAaC,aAAa,iBAC/C,IAOF,GALIE,OAAOC,MAAMP,KAAuBA,OAAuBiB,IAC1DjB,GAAwBK,IAC3BL,EAA0C,IAAnBK,EAAQN,UAEjCP,EAAmBO,IAAY,IAAImB,MAAOC,UAAY5B,GAClDI,EAAOe,OAASlB,EAAmB,EAAG,OACtCA,EAAmB,IAAGA,EAAmB,GAE7C,MAAM4B,EACJ,EAAI5B,GAAoBQ,GAAwBzB,GAC5C8C,EAAgB1B,EAAOxB,GAAGG,cAC9B,+CAA+CqB,EAAOQ,YAAc,MAGtEkB,EAAc/C,cAAc,QAAQgD,SACpCD,EAAcE,mBACZ,YACA,qCACyB,IAAhBH,EAAN,iBAEJ,EA4BGI,EAA0B7B,IAC9BiB,EAAajB,GACbD,EAAcC,GACdJ,GAAoB,IAAI2B,MAAOC,UAE/B,MAAMM,EAAe9B,EAAOxB,GAAGG,cAC7B,6CAEEmD,GACFA,EAAaC,UAAUJ,OAAO,4CAGhC,MAAMD,EAAgB1B,EAAOxB,GAAGG,cAC9B,+CAA+CqB,EAAOQ,YAAc,MAGhEE,EAAUV,EAAOO,OAAOP,EAAOQ,aAAa7B,cAAc,SAChE,GAAI+B,EAAS,CACXA,EAAQsB,YAAc,EACtB,IACE7C,EAAW8C,uBAAsB,KAC/BvB,EAAQwB,MAAM,GAExB,CAAQ,MAAOC,GAEf,CACA,CAEInC,EAAOO,OAAO6B,SAASC,IACrBA,EAAQC,iBAAiB,SAASF,SAASG,IACrCA,IAAQ7B,IACZ6B,EAAIP,YAAc,EACbtB,GAASU,qBAAqBjC,GACnCoD,EAAIlB,QAAO,GACX,IAGJ/B,EACGkD,QAAO,CAACC,EAAGC,IAAUA,IAAUrD,IAC/B+C,SAASK,IACRA,EAAEjE,GAAG8D,iBAAiB,SAASF,SAASG,IACjC7B,GAASU,qBAAqBjC,GACnCoD,EAAIlB,OAAO,GACX,IAEN,MAAMsB,EAAa,IAAIjB,EAAckB,cAAcC,UAC7CC,EAAc,IAAIH,GAAYH,QAClC,CAAChE,EAAIkE,IAAUA,EAAQC,EAAWxC,QAAQuB,KAEtCqB,EAAc,IAAIJ,GAAYH,QAClC,CAAChE,EAAIkE,IAAUA,EAAQC,EAAWxC,QAAQuB,KAG5CoB,EAAYV,SAAS5D,IACnBA,EAAGuD,UAAUiB,IAAI,2CACjBxE,EAAG8D,iBAAiB,QAAQF,SAASa,GAAMA,EAAEtB,WAC7CnD,EAAGoD,mBAAmB,YAAa,gBAAgB,IAIrDmB,EAAYX,SAAS5D,IACnBA,EAAGuD,UAAUJ,OACX,0CACA,4CAEFnD,EAAG8D,iBAAiB,QAAQF,SAASa,GAAMA,EAAEtB,WAC7CnD,EAAGoD,mBAAmB,YAAa,gBAAgB,IAIrDF,EAAcK,UAAUJ,OAAO,2CAC/BD,EAAcK,UAAUiB,IAAI,4CAC5B,IAAItB,EAAcmB,UAAUT,SAAS5D,GAAOA,EAAGmD,WAC/CD,EAAcE,mBAAmB,YAAa,iBAGxBF,EAAcwB,YACpCxB,EAAc/C,cAAc,QAAQwE,MAAMC,UAAY,iBACtD1B,EAAc/C,cACZ,QACAwE,MAAME,mBAAqB,GAAGxD,MAE5Bd,IACFqC,qBAAqB7B,GACrBA,EAAwB0C,uBAAsB,KAC5ClD,EAAsBM,EAAsBW,EAAOQ,YAAY,IAEvE,EA2NE,MAxNuB,MACrB,MAAM8C,EAAoB,KACxB9E,EAAGuD,UAAUiB,IAAI,6BAA6B,EAE1CO,EAAuB,KAC3B/E,EAAGuD,UAAUJ,OAAO,6BAA6B,EAEnDzC,EAAa,IAAIL,EAAOH,EAAc,CACpC8E,aAA+B,IAAf1E,EAA6B,CAACA,GAAc,GAC5D2E,OAAQ,OACRC,MAAO,IACPC,UAAW,EACXC,WAAY,CACVC,QAAQ,GAEVC,UAAU,EACVC,GAAI,CACFC,kBACET,GACV,EACQU,kBACEV,GACV,EACQW,gBACEZ,GACV,EACQa,KAAKjF,GACHA,EAAWT,OAAO2F,gBAAkB,GACpCd,GACV,EACQe,cACE,MAAMC,EAAgBhF,EAAWD,GACjCA,EAAuBH,EAAWsB,YAClC,MAAM+D,EAAmBjF,EAAWD,GACpC4B,EAAaqD,GACbvE,EAAcwE,GACd1C,EAAuB0C,EACjC,IAEM,EA4HJC,GArDEhG,EAAG8D,iBAAiB,mBAAmBF,SACrC,CAACqC,EAAavE,KACZ,MAAMF,EAAS,IAAInB,EAAO4F,EAAa,CACrCf,MAAO,EACPgB,QAAQ,EACRC,gBAAgB,EAChBb,UAAU,EACVC,GAAI,CACFa,WAAW5E,GACTR,GAAY,EACZM,GAAsB,EACtBL,GAAiB,IAAI8B,MAAOC,UAC5B9B,EAAoBoB,YAAW,KAC7BhB,GAAsB,EACtBqB,EAAcnB,EAAO,GACpB,IACjB,EACY6E,SAAS7E,GACPkB,aAAaxB,GACTL,IAAyBa,GACxBV,IAGLG,GAAoB,IAAI4B,MAAOC,UAAY/B,EACvCK,GA1PO,CAACE,IACtB,GAAIA,EAAOe,OAASlB,EAAmB,EAAG,OAC1CD,GAAoB,IAAI2B,MAAOC,UAE/BzB,EAAcC,EAAQH,GAEtB,MAAMa,EAAUV,EAAOO,OAAOP,EAAOQ,aAAa7B,cAAc,SAChE,GAAI+B,EACF,IACEvB,EAAW8C,uBAAsB,KAC/BvB,EAAQwB,MAAM,GAExB,CAAQ,MAAOC,GAEf,CAEI,MAAM2C,EAAS9E,EAAOxB,GAAGG,cACvB,+CACEqB,EAAOQ,YAAc,aAIzBsE,EAAO3B,MAAMC,UAAY,iBACzB0B,EAAO3B,MAAME,mBAAqB,GAAGxD,KAAoB,EAmOtBkF,CAAe/E,GACxCF,GAAsB,EACtBN,GAAY,EAC1B,EACY2E,KAAKnE,GACEZ,IACDC,IAAyBa,EAC3Be,EAAajB,GAEbiC,uBAAsB,KACpBJ,EAAuB7B,EAAO,IAGhD,EACYqE,YAAYrE,GACV6B,EAAuB7B,EACrC,KA5GkC,CAACyE,IAC/B,MAAMlE,EAASkE,EAAYnC,iBAAiB,iBACtC0C,EAAwBC,SAASC,cAAc,OACrDF,EAAsBjD,UAAUiB,IAAI,6BAEpC,IAAK,IAAImC,EAAI,EAAGA,EAAI5E,EAAO6E,OAAQD,GAAK,EAAG,CACzC,MAAME,EAAqBJ,SAASC,cAAc,OAClDG,EAAmBtD,UAAUiB,IAAI,oCACjCqC,EAAmBC,YAAYL,SAASC,cAAc,SACtDF,EAAsBM,YAAYD,EACxC,CAEIZ,EAAYa,YAAYN,EAAsB,EAoG1CO,CAAwBd,GA3FE,EAACA,EAAazE,KAC7ByE,EAAYnC,iBAAiB,iBAErCF,SAASC,IACd,MAAMmD,EAAYP,SAASC,cAAc,OACnCO,EAAaR,SAASC,cAAc,OAE1CM,EAAUzD,UAAUiB,IAClB,wBACA,8BAEFyC,EAAW1D,UAAUiB,IACnB,wBACA,8BAGFX,EAAQiD,YAAYE,GACpBnD,EAAQiD,YAAYG,GAmBpBD,EAAUE,iBAAiB,SAjBJ,KACjB/F,EAAoB,MACpBK,EAAO2F,YACTzG,EAAW0G,YAGb5F,EAAO4F,YAAW,IAYpBH,EAAWC,iBAAiB,SAVJ,KAClB/F,EAAoB,MACpBK,EAAOe,MACT7B,EAAW8B,YAGbhB,EAAOgB,YAAW,GAIiC,GACrD,EAuDE6E,CAAwBpB,EAAazE,GAErCV,EAAWwG,KAAK9F,EAAO,IA0DtB,CAAExB,KAAIU,aAAYI,aAAYyG,QA1BrB,KACV7G,GAAcA,EAAW6G,SAAS7G,EAAW6G,UACjDzG,EAAW8C,SAAS4D,IAClB/E,EAAa+E,GACcA,EAzItBxH,GACJ8D,iBACC,iEAEDF,SAAS5D,GAAOA,EAAGmD,WA2CW,CAAC3B,IAClCA,EAAOxB,GACJ8D,iBAAiB,0BACjBF,SAAS5D,GAAOA,EAAGmD,UAAS,EAwF7BsE,CAA2BD,GACvBA,EAAUD,SAASC,EAAUD,SAAS,GAC1C,EAmB0CG,QAhB9B,CAACC,EAAWC,KAI1B,GAHIlH,GAAcA,EAAWgH,UAAYhH,EAAWmH,WAClDnH,EAAWgH,QAAQC,EAAW,QAER,IAAbC,EAA0B,CACnC,MAAMJ,EAAY1G,EAAW6G,GACzBH,EAAUE,UAAYF,EAAUK,YAC9BL,EAAUxF,cAAgB4F,EAC5BvE,EAAuBmE,GAEvBA,EAAUE,QAAQE,EAAU,GAGtC,GAGyDE,OAlDxC,KACTlH,GACJE,EAAW8C,SAAQ,CAAC4D,EAAW9F,KACzBA,IAAmBb,GACrBwC,EAAuBmE,EAC/B,GACM,EA4C2DO,QAzC/C,KACdnH,GAAU,EACVE,EAAW8C,SAAQ,CAAC4D,EAAW9F,KAC7B8F,EAAUxH,GAAG8D,iBAAiB,SAASF,SAAS1B,IAC9CU,qBAAqBjC,GACrBuB,EAAQW,OAAO,IAEbnB,IAAmBb,EACrB8B,EAAc6E,GAEd/E,EAAa+E,EACrB,GACM,EA8BN,C"}